<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>NOX Premium ‚Ä¢ An√°lises Avan√ßadas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --neon:#00ff9c;
  --dark:#020617;
  --soft:#94a3b8;
}

body{
  margin:0;
  font-family:"Segoe UI",Arial,sans-serif;
  background:
    radial-gradient(600px at top, rgba(0,255,156,.15), transparent 60%),
    linear-gradient(180deg, #020617, #01030f);
  color:#fff;
  min-height:100vh;
  padding:20px 10px 50px;
}

.container{
  width:100%;
  max-width:500px;
  margin:0 auto;
  background:linear-gradient(180deg, rgba(15,23,42,.95), rgba(2,6,23,.98));
  border-radius:22px;
  padding:24px 22px;
  box-shadow:
    0 24px 70px rgba(0,0,0,.7),
    inset 0 0 0 1px rgba(0,255,156,.18);
}

.nav-back{
  text-align:left;
  margin-bottom:10px;
}

.nav-back a{
  color:var(--neon);
  text-decoration:none;
  font-size:13px;
}

.logo{
  max-width:110px;
  margin:6px auto 12px;
  display:block;
  filter:drop-shadow(0 0 10px rgba(0,255,156,.35));
}

h1{
  margin:4px 0 2px;
  font-size:22px;
  text-align:center;
}

.version{
  font-size:12px;
  color:var(--soft);
  text-align:center;
  margin-bottom:16px;
}

.info{
  font-size:13.5px;
  background:rgba(0,255,156,.08);
  padding:14px;
  border-radius:14px;
  line-height:1.55;
  border:1px solid rgba(0,255,156,.25);
  color:#c7fbe7;
  margin-bottom:16px;
}

.form-group{
  margin-top:14px;
}

label{
  display:block;
  font-size:13px;
  color:var(--soft);
  margin-bottom:6px;
}

input{
  width:100%;
  height:44px;
  padding:0 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(2,6,23,.9);
  color:#fff;
  font-size:14px;
  box-sizing:border-box;
}

input[type="date"]{
  appearance:none;
  -webkit-appearance:none;
}

button{
  width:100%;
  height:46px;
  border-radius:16px;
  border:none;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
  margin-top:12px;
}

button.primary{
  background:linear-gradient(135deg, #00ff9c, #00c777);
  color:#00150c;
  opacity:.45;
  cursor:not-allowed;
}

button.secondary{
  background:transparent;
  border:1px solid rgba(0,255,156,.5);
  color:var(--neon);
}

.results{
  margin-top:16px;
}

.match{
  padding:7px 9px;
  border-radius:9px;
  cursor:pointer;
  font-size:13.5px;
}

.match.selected{
  background:rgba(0,255,156,.35);
  color:#00150c;
}

.status{
  margin-top:16px;
  background:rgba(255,0,0,.08);
  border:1px solid rgba(255,0,0,.35);
  color:#ffb4b4;
  padding:12px;
  border-radius:12px;
  font-size:13px;
  text-align:center;
}

.metrics{
  margin-top:20px;
  display:grid;
  gap:10px;
}

.metric-card{
  background:rgba(0,255,156,.06);
  border:1px solid rgba(0,255,156,.25);
  border-radius:14px;
  padding:12px;
}

.metric-card h4{
  margin:0 0 6px;
  font-size:13.5px;
  color:var(--neon);
}
</style>
</head>

<body>
<div class="container">

<div class="nav-back">
  <a href="index.html">‚Üê Voltar para in√≠cio</a>
</div>

<img src="images/logo.png" class="logo">

<h1>NOX Premium</h1>
<div class="version">P√°gina 5 ‚Ä¢ v1.3</div>

<div class="info">
üîê Utilize esta p√°gina no <strong>navegador da sua carteira</strong>.<br>
üí° Cada pagamento libera <strong>1 an√°lise Premium</strong>.
</div>

<div class="form-group">
  <label>API Key ‚Ä¢ API-Football</label>
  <input id="apikey" type="text">
</div>

<div class="form-group">
  <label>Data da an√°lise</label>
  <input id="date" type="date">
</div>

<button class="secondary" onclick="loadCompetitions()">üìÖ Carregar Partidas</button>

<div id="competitions" class="results"></div>

<button id="payBtn" class="secondary">üí≥ Efetuar Pagamento Premium</button>

<div class="status" id="paymentStatus">
üîí Acesso Premium bloqueado. Efetue o pagamento.
</div>

<button id="analyzeBtn" class="primary" onclick="analyzeMatch()" disabled>
üîé Analisar Partida
</button>

<div class="metrics"></div>

</div>

<script>
const BACKEND_LIST = "https://backendnoxv2.srrimas2017.workers.dev";
let selectedFixture = null;

async function loadCompetitions(){
  const apiKey = apikey.value;
  const dateVal = date.value;
  const box = competitions;

  const res = await fetch(BACKEND_LIST,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ apiKey, date:dateVal })
  });

  const data = await res.json();
  let html = "";

  data.competitions.forEach(c=>{
    c.matches.forEach(m=>{
      html+=`<div class="match" onclick="selectMatch(this)" data-fixture="${m.fixtureId}">
        ${m.time} ${m.home} x ${m.away}
      </div>`;
    });
  });

  box.innerHTML = html;
}

function selectMatch(el){
  document.querySelectorAll(".match").forEach(m=>m.classList.remove("selected"));
  el.classList.add("selected");
  selectedFixture = el.dataset.fixture;
}
</script>

<script type="module" src="money/walletv12.js"></script>
<script src="statistics/statistics.js"></script>

<script>
/* =============================
   CONTROLE PREMIUM REAL
   1 PAGAMENTO = 1 AN√ÅLISE
============================= */

(() => {
  const btn = document.getElementById("analyzeBtn");
  const status = document.getElementById("paymentStatus");

  let credit = 0;

  const lock = () => {
    btn.disabled = true;
    btn.style.opacity = ".45";
    btn.style.cursor = "not-allowed";
  };

  const unlock = () => {
    btn.disabled = false;
    btn.style.opacity = "1";
    btn.style.cursor = "pointer";
  };

  lock();

  btn.addEventListener("click", () => {
    if (credit <= 0) {
      lock();
      status.innerText = "üîí Acesso Premium bloqueado. Efetue o pagamento.";
      return;
    }
    credit = 0;
    lock();
    status.innerText = "üîí An√°lise utilizada. Efetue novo pagamento.";
  });

  window.addEventListener("nox-payment-ok", () => {
    credit = 1;
    unlock();
    status.innerText = "‚úÖ Pagamento confirmado ‚Ä¢ 1 an√°lise dispon√≠vel";
  });
})();
</script>

</body>
</html>
