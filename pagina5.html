<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste walletv12</title>
</head>
<body>

<button id="btn">Testar walletv12</button>
<pre id="log"></pre>

<script type="module">
  import { payAndAnalyze } from "./money/walletv12.js";

  const logEl = document.getElementById("log");
  const log = (msg) => logEl.textContent += msg + "\n";

  log("HTML carregado");

  if (!window.ethereum) {
    log("MetaMask NÃO detectada");
  } else {
    log("MetaMask detectada");
  }

  document.getElementById("btn").onclick = async () => {
    log("Botão clicado");

    try {
      const result = await payAndAnalyze(
        "TEST_FIXTURE",
        "TEST_API_KEY"
      );

      log("SUCESSO:");
      log(JSON.stringify(result, null, 2));
    } catch (err) {
      log("ERRO:");
      log(err.message);
    }
  };
</script>

</body>
</html>
