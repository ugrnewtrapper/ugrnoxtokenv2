<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Teste Backend Workers.js</title>
</head>
<body>

  <h2>Teste Backend Cloudflare Worker</h2>

  <label>API Key:</label><br />
  <input id="apiKey" style="width:400px" /><br /><br />

  <label>Data (YYYY-MM-DD):</label><br />
  <input id="date" value="2024-01-01" /><br /><br />

  <label>Competition ID:</label><br />
  <input id="competitionId" /><br /><br />

  <label>Fixture ID:</label><br />
  <input id="fixtureId" /><br /><br />

  <button onclick="loadCompetitions()">1️⃣ Competitions</button>
  <button onclick="loadFixtures()">2️⃣ Fixtures</button>
  <button onclick="testPayment()">3️⃣ Payment</button>
  <button onclick="testAnalysis()">4️⃣ Analysis</button>

  <pre id="output"></pre>

  <script>
    const BACKEND_URL = "https://backendv12.srrimas2017.workers.dev";

    async function send(payload) {
      const res = await fetch(BACKEND_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      const json = await res.json();
      document.getElementById("output").textContent =
        JSON.stringify(json, null, 2);
    }

    function loadCompetitions() {
      send({
        step: "competitions",
        apiKey: apiKey.value,
        date: date.value
      });
    }

    function loadFixtures() {
      send({
        step: "fixtures",
        apiKey: apiKey.value,
        date: date.value,
        competitionId: competitionId.value
      });
    }

    function testPayment() {
      send({
        step: "payment",
        apiKey: apiKey.value,
        fixtureId: fixtureId.value,
        paymentData: { test: true }
      });
    }

    function testAnalysis() {
      send({
        step: "analysis",
        apiKey: apiKey.value,
        fixtureId: fixtureId.value,
        paymentData: { test: true }
      });
    }
  </script>

</body>
</html>
