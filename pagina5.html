<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NOX PREMIUM</title>  <!-- =============================
       ESTILO VISUAL ‚Äì FINTECH
  ============================== -->  <style>
    :root {
      --bg: #061b22;
      --bg-panel: #0b2f3a;
      --primary: #0aa6c2;
      --secondary: #5fd1e3;
      --text-main: #e6f6fa;
      --text-soft: #9fc9d3;
      --danger: #ff6b6b;
    }

    * {
      box-sizing: border-box;
      font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #0b3442, var(--bg));
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      width: 100%;
      max-width: 960px;
      padding: 40px 24px 60px;
      text-align: center;
    }

    .back-btn {
  position: fixed;
  top: 24px;
  left: 24px;

  width: auto !important;   /* ‚Üê CORRE√á√ÉO CR√çTICA */
  padding: 0 !important;    /* opcional, deixa elegante */

  background: none;
  border: none;
  color: var(--secondary);
  font-size: 14px;
  cursor: pointer;
  letter-spacing: 1px;

  z-index: 9999;
}

    .logo {
      width: 140px;
      margin: 0 auto 24px;
    }

    h1 {
      font-size: clamp(36px, 6vw, 54px);
      margin: 0;
      letter-spacing: 3px;
    }

    h2 {
      margin: 12px 0 28px;
      font-size: clamp(16px, 3vw, 20px);
      font-weight: 500;
      color: var(--secondary);
      letter-spacing: 4px;
    }

    .info {
      max-width: 720px;
      margin: 0 auto 36px;
      font-size: 14px;
      color: var(--text-soft);
      line-height: 1.8;
    }

    .field {
      margin: 16px auto;
      max-width: 420px;
    }

    input, button {
      width: 100%;
      padding: 14px 16px;
      border-radius: 10px;
      border: none;
      outline: none;
      font-size: 15px;
    }

    input {
      background: var(--bg-panel);
      color: var(--text-main);
      text-align: center;
    }

    input::placeholder {
      color: var(--text-soft);
    }

    button.primary {
      margin-top: 12px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #001418;
      font-weight: 600;
      letter-spacing: 1px;
      cursor: pointer;
    }

    .panel {
      background: linear-gradient(180deg, #0c3442, #081f28);
      border-radius: 16px;
      padding: 20px;
      margin: 24px auto;
      max-width: 720px;
      display: none;
    }

    .competition {
      margin: 12px 0;
      text-align: left;
    }

    .competition h4 {
      margin: 8px 0;
      color: var(--secondary);
    }

    .match {
      padding: 8px;
      margin: 6px 0;
      border-radius: 8px;
      cursor: pointer;
      background: rgba(255,255,255,0.04);
    }

    .match:hover {
      background: rgba(255,255,255,0.08);
    }

    .status {
      margin: 16px 0;
      font-size: 14px;
      color: var(--secondary);
    }

    .results {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-top: 36px;
    }

    .result-box {
      background: linear-gradient(180deg, #0b2f3a, #071a21);
      border-radius: 16px;
      padding: 20px;
    }

    .result-box h3 {
      margin-bottom: 14px;
      font-size: 16px;
      color: var(--secondary);
      letter-spacing: 1px;
    }

    .empty {
      font-size: 13px;
      color: var(--text-soft);
    }
  </style></head>
<body>
  <button class="back-btn" onclick="history.back()">VOLTAR</button>

<div class="container">
  <img src="images/logo2.png" class="logo" alt="NOX" />  <h1>NOX PREMIUM</h1>
  <h2>VERS√ÉO 7.0 ‚Ä¢ FUTURE</h2>  <div class="info">
    <div>Esta interface foi projetada para execu√ß√£o em navegadores integrados a carteiras Web3, como Trust Wallet ou MetaMask, garantindo compatibilidade total com opera√ß√µes blockchain.</div>
    <div>Cada transa√ß√£o confirmada habilita automaticamente uma an√°lise estat√≠stica avan√ßada e exclusiva para a partida selecionada.</div>
  </div>  <div class="field">
    <input id="apiKey" type="password" placeholder="INSIRA SUA API KEY" />
  </div>  <div class="field">
    <input id="date" type="date" />
  </div>  <div class="field">
    <button class="primary" onclick="loadCompetitions()">CARREGAR COMPETI√á√ïES</button>
    <div id="selectedMatch" class="status" style="display:none;"></div>
  </div>  <div id="competitions" class="panel"></div>  <div class="field">
    <button class="primary" onclick="analyze()">ANALISAR</button>
  </div>  <div id="status" class="status"></div>  <div class="results">
    <div class="result-box">
      <h3>MELHORES JOGADORES</h3>
      <div id="players" class="empty">SEM DADOS PARA ESSA PARTIDA.</div>
    </div>
    <div class="result-box">
      <h3>MODA DE CART√ïES</h3>
      <div id="cards" class="empty">SEM DADOS PARA A PARTIDA.</div>
    </div>
    <div class="result-box">
      <h3>MODA ESCANTEIOS</h3>
      <div id="corners" class="empty">SEM DADOS PARA A PARTIDA.</div>
    </div>
  </div>
</div><!-- =============================
     SCRIPT ‚Äì INTEGRA√á√ÉO TOTAL
============================== -->
  <script type="module" src="./money/walletv12.js"></script>

  import { payAndAnalyze } from "./money/walletv12.js";
  window.payAndAnalyze = payAndAnalyze;

  const backend = "https://backendv12.srrimas2017.workers.dev";
  let selectedFixture = null;

  window.loadCompetitions = async () => {
    const apiKey = apiKeyInput();
    const date = document.getElementById("date").value;
    if (!apiKey || !date) return;

    let res;
try {
  res = await fetch(`${backend}/competitions`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      apiKey,
      date,
      wallet: "ui"
    })
  });
} catch (e) {
  alert("Falha de conex√£o com o backend");
  return;
}

let json;
try {
  json = await res.json();
} catch {
  alert("Resposta inv√°lida do servidor");
  return;
}

if (!res.ok) {
  alert(json.error || "Erro ao carregar competi√ß√µes");
  return;
}
    const panel = document.getElementById("competitions");
    panel.innerHTML = "";
    panel.style.display = "block";

    Object.entries(json.data).forEach(([country, leagues]) => {
      Object.entries(leagues).forEach(([league, matches]) => {
        const c = document.createElement("div");
        c.className = "competition";
        c.innerHTML = `<h4>${country} ‚Ä¢ ${league}</h4>`;

        matches.forEach(m => {
          const div = document.createElement("div");
          div.className = "match";
          div.textContent = `${m.teams.home.name} x ${m.teams.away.name} ‚Äî ${new Date(m.date).toLocaleTimeString()}`;
          div.onclick = () => {
  selectedFixture = m.fixtureId;

  const selected = document.getElementById("selectedMatch");
  selected.innerHTML = `
    Partida selecionada:<br>
    <strong>${m.teams.home.name} x ${m.teams.away.name}</strong><br>
    ${country} ‚Ä¢ ${league} ‚Äî ${new Date(m.date).toLocaleTimeString()}
  `;
  selected.style.display = "block";

  // üî• MINIMIZA DE VERDADE
  panel.innerHTML = "";
  panel.style.display = "none";
};
          c.appendChild(div);
        });

        panel.appendChild(c);
      });
    });
  };

  window.analyze = async () => {
    if (!selectedFixture) return;
    const apiKey = apiKeyInput();
    const status = document.getElementById("status");

    status.textContent = "Iniciando pagamento...";
    await delay(10000);

    status.textContent = "Confirmando transa√ß√£o...";
    await delay(10000);

    status.textContent = "Gerando an√°lise autom√°tica...";
    await delay(10000);

    if (typeof payAndAnalyze !== "function") {
  alert("Wallet n√£o carregada corretamente");
  return;
}

const result = await payAndAnalyze(selectedFixture, apiKey);
    render(result.analysis);
    status.textContent = "An√°lise conclu√≠da.";
  };

  function render(data) {
    const teams = Object.values(data);

    document.getElementById("players").innerHTML = teams.map(t =>
      `${t.topGoals?.name || ""} (${t.topGoals?.value || 0})`
    ).join("<br>") || "SEM DADOS PARA ESSA PARTIDA.";

    document.getElementById("cards").textContent = teams[0]?.cardMode?.mode ?? "SEM DADOS PARA A PARTIDA.";
    document.getElementById("corners").textContent = teams[0]?.cornerMode?.mode ?? "SEM DADOS PARA A PARTIDA.";
  }

  function apiKeyInput() {
    return document.getElementById("apiKey").value;
  }

  function delay(ms) {
    return new Promise(r => setTimeout(r, ms));
  }
</script></body>
           </html>
